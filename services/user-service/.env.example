# ============================================
# USER-SERVICE Environment Configuration
# ============================================
# Copy this file to .env and update values as needed
# For production, use secure values and proper secrets management

# ============================================
# Server Configuration
# ============================================
NODE_ENV=development
PORT=3002

# ============================================
# Database Configuration
# ============================================
# Local Development: PostgreSQL via Docker
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?connection_limit=20&pool_timeout=10
DATABASE_URL=postgresql://user_user:user_pass@localhost:5435/user_db?connection_limit=20&pool_timeout=10

# Production Example:
# DATABASE_URL=postgresql://user:password@prod-db-host:5432/user_db?connection_limit=20&pool_timeout=10&sslmode=require

# ============================================
# Auth Service Configuration (for RBAC)
# ============================================
# Local Development: Auth service running locally
AUTH_SERVICE_URL=http://localhost:3001

# Production Example:
# AUTH_SERVICE_URL=https://auth-service.yourdomain.com
# AUTH_SERVICE_API_KEY=your-service-to-service-api-key

# Optional: API key for service-to-service authentication
AUTH_SERVICE_API_KEY=

# ============================================
# Redis Configuration (Optional but Recommended)
# ============================================
# Local Development: Redis via Docker
REDIS_URL=redis://localhost:6379

# Production Example:
# REDIS_URL=redis://user:password@redis-host:6379
# Or with SSL:
# REDIS_URL=rediss://user:password@redis-host:6380

# ============================================
# AWS SQS Configuration (Event Consumption)
# ============================================
# Local Development: LocalStack SQS
AWS_REGION=us-east-1
LOCALSTACK_ENDPOINT=http://localhost:4566
SQS_QUEUE_URL=http://localhost:4566/000000000000/user-events-queue

# Production Example:
# AWS_REGION=us-east-1
# SQS_QUEUE_URL=https://sqs.us-east-1.amazonaws.com/123456789012/user-events-queue
# (Remove LOCALSTACK_ENDPOINT in production)

# ============================================
# Logging Configuration
# ============================================
# Options: error, warn, info, debug
LOG_LEVEL=info

# Production:
# LOG_LEVEL=warn

# ============================================
# Server Timeouts
# ============================================
# Request timeout in milliseconds (30 seconds)
REQUEST_TIMEOUT_MS=30000
# Graceful shutdown timeout in milliseconds (30 seconds)
SHUTDOWN_TIMEOUT_MS=30000

# ============================================
# Production Notes
# ============================================
# 1. Use connection pooling in DATABASE_URL: ?connection_limit=20&pool_timeout=10
# 2. Enable SSL for database in production: ?sslmode=require
# 3. Set proper CORS origins in production (configured in code)
# 4. Set LOG_LEVEL=warn or error in production
# 5. Configure AUTH_SERVICE_URL to point to your auth-service
# 6. Set AUTH_SERVICE_API_KEY for service-to-service authentication in production
# 7. Use AWS Secrets Manager or similar for sensitive values in production
