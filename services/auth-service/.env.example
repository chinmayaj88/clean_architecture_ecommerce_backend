# ============================================
# AUTH-SERVICE Environment Configuration
# ============================================
# Copy this file to .env and update values as needed
# For production, use secure values and proper secrets management

# ============================================
# Server Configuration
# ============================================
NODE_ENV=development
PORT=3001

# ============================================
# Database Configuration
# ============================================
# Local Development: PostgreSQL via Docker
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?connection_limit=20&pool_timeout=10
DATABASE_URL=postgresql://auth_user:auth_pass@localhost:5433/auth_db?connection_limit=20&pool_timeout=10

# Production Example:
# DATABASE_URL=postgresql://user:password@prod-db-host:5432/auth_db?connection_limit=20&pool_timeout=10&sslmode=require

# ============================================
# JWT Configuration
# ============================================
# Generate secure secrets using: openssl rand -base64 32
# These MUST be at least 32 characters long
JWT_SECRET=your-super-secret-jwt-access-token-key-min-32-chars-long
JWT_REFRESH_SECRET=your-super-secret-jwt-refresh-token-key-min-32-chars-long
JWT_ACCESS_TOKEN_EXPIRES_IN=15m
JWT_REFRESH_TOKEN_EXPIRES_IN=7d

# ============================================
# Cookie Configuration
# ============================================
# Generate secure secret using: openssl rand -base64 32
COOKIE_SECRET=your-super-secret-cookie-signing-key-min-32-chars-long
COOKIE_DOMAIN=
COOKIE_SECURE=false

# For Production:
# COOKIE_DOMAIN=.yourdomain.com
# COOKIE_SECURE=true

# ============================================
# Rate Limiting Configuration
# ============================================
# Window in milliseconds (15 minutes = 900000ms)
RATE_LIMIT_WINDOW_MS=900000
# Max requests per window
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# Redis Configuration (Optional but Recommended)
# ============================================
# Local Development: Redis via Docker
REDIS_URL=redis://localhost:6379

# Production Example:
# REDIS_URL=redis://user:password@redis-host:6379
# Or with SSL:
# REDIS_URL=rediss://user:password@redis-host:6380

# ============================================
# AWS/LocalStack Configuration (Event Publishing)
# ============================================
# Local Development: Use LocalStack
AWS_REGION=us-east-1
LOCALSTACK_ENDPOINT=http://localhost:4566

# For LocalStack, SNS topic will be auto-created
# Format: arn:aws:sns:us-east-1:000000000000:user-events
SNS_TOPIC_ARN=arn:aws:sns:us-east-1:000000000000:user-events

# Production: Use real AWS SNS
# AWS_REGION=us-east-1
# SNS_TOPIC_ARN=arn:aws:sns:us-east-1:123456789012:user-events
# AWS_ACCOUNT_ID=123456789012
# (Remove LOCALSTACK_ENDPOINT in production)

# Event Publisher Type (auto-detected if LOCALSTACK_ENDPOINT is set)
# Options: 'mock' (for testing), 'sns' (for production/local)
EVENT_PUBLISHER_TYPE=sns

# ============================================
# SQS Configuration (Optional - for consuming events)
# ============================================
# Local Development: LocalStack SQS
SQS_QUEUE_URL=http://localhost:4566/000000000000/user-events-queue

# Production Example:
# SQS_QUEUE_URL=https://sqs.us-east-1.amazonaws.com/123456789012/user-events-queue

# ============================================
# Logging Configuration
# ============================================
# Options: error, warn, info, debug
LOG_LEVEL=info

# Production:
# LOG_LEVEL=warn

# ============================================
# Server Timeouts
# ============================================
# Request timeout in milliseconds (30 seconds)
REQUEST_TIMEOUT_MS=30000
# Graceful shutdown timeout in milliseconds (30 seconds)
SHUTDOWN_TIMEOUT_MS=30000

# ============================================
# Production Notes
# ============================================
# 1. Generate secure JWT secrets: openssl rand -base64 32
# 2. Generate secure cookie secret: openssl rand -base64 32
# 3. Use connection pooling in DATABASE_URL: ?connection_limit=20&pool_timeout=10
# 4. Enable SSL for database in production: ?sslmode=require
# 5. Set COOKIE_SECURE=true in production
# 6. Use proper CORS origins in production (configured in code)
# 7. Set LOG_LEVEL=warn or error in production
# 8. Use AWS Secrets Manager or similar for sensitive values in production
